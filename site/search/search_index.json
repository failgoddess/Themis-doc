{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"\u4e3b\u9875 \u4ec0\u4e48\u662fThemis \u4f4e\u4ee3\u7801\u6846\u67b6 Themis \u662f\u4e00\u4e2a\u4f4e\u4ee3\u7801\u6846\u67b6\u8d1f\u8d23\u5c06\u4ee5\u4e0b\u4ee3\u7801\u90e8\u5206\u4ee5\u4f4e\u4ee3\u7801\u7684\u65b9\u5f0f\u5b9e\u73b0 \u5f00\u53d1\u4e00\u4e2a\u9700\u6c42 \u5728\u4ecb\u7ecdThemis\u4e4b\u524d\u6211\u4eec\u5148\u6765\u770b\u4e00\u6bb5\u5e38\u89c1\u7684\u4e1a\u52a1\u9700\u6c42\u548c\u5982\u4f55\u5b9e\u73b0 \u4f8b\u5982\u5728\u524d\u53f0\u4e0b\u5355\u524d\uff08\u77e5\u9053\u7528\u6237\u3001\u95e8\u5e97\u3001\u91d1\u989d\uff09\u9700\u8981\u83b7\u53d6\u53ef\u4ee5\u4eab\u53d7\u591a\u5c11\u6298\u6263 \u4e1a\u52a1\u89c4\u5219\u662f \u95e8\u5e97\u7b49\u7ea7\u4e3a\u7532\u7ea7 \u6216\u8005 \u95e8\u5e97\u6240\u5c5e\u533a\u57df\u4e3a\u4eac\u6d25\u5180\u533a\u57df \u5219 \u6298\u6263\u4e3a7\u6298 . \u5426\u5219 \u95e8\u5e97\u4e3a\u65b0\u5e97 \u5219 \u6298\u6263\u4e3a8\u6298 ,\u4f46\u662f\u5f00\u4e1a\u591a\u5c11\u5929\u5185\u7684\u95e8\u5e97\u4e3a\u65b0\u5e97\u91c7\u7528\u516c\u53c2\u914d\u7f6e. \u5426\u5219 \u8ba2\u5355\u91d1\u989d\u5927\u4e8e10000 \u6298\u6263\u4e3a9\u6298. \u5747\u4e0d\u6ee1\u8db3\u5219\u4e0d\u4eab\u53d7\u6298\u6263 . \u4e00\u4e2a\u679a\u4e3e\u7c7b:Level\u8868\u793a\u95e8\u5e97\u7b49\u7ea7 \u5206\u522b\u4e3a10\u753220\u4e5930\u4e19 \u4e24\u4e2a\u5b9e\u4f53\u7c7b:Area\u8868\u793a\u533a\u57df\u3001Store\u8868\u793a\u95e8\u5e97,\u5176\u4e2d\u95e8\u5e97\u4e2d\u5b58\u5728\u4e00\u4e2a\u5c5e\u6027\u9879area\u6570\u636e\u7c7b\u578b\u4e3a\u533a\u57df\u5bf9\u8c61 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 /** * \u533a\u57df */ public class Area { //\u7f16\u7801 private String code ; //\u533a\u57df\u540d\u79f0 private String name ; } /** * \u95e8\u5e97\u7b49\u7ea7\u679a\u4e3e */ public enum Level { L_10 ( \"10\" , \"\u7532\" ), L_20 ( \"20\" , \"\u4e59\" ), L_30 ( \"30\" , \"\u4e19\" ); private String code ; private String name ; private Level ( String code , String name ) { this . code = code ; this . name = name ; } } /** * \u95e8\u5e97 */ public class Store { //\u7f16\u7801 private String code ; //\u95e8\u5e97\u540d\u79f0 private String name ; //\u5f00\u4e1a\u65f6\u95f4 private LocalDate startTime ; //\u95e8\u5e97\u7b49\u7ea7 private Level level ; //\u95e8\u5e97\u6240\u5c5e\u533a\u57df private Area area ; } \u4e1a\u52a1\u4ee3\u7801\u5c06\u53ef\u4ee5\u91c7\u7528\u5982\u4e0b\u5b9e\u73b0 getDiscount \u65b9\u6cd5\u4e3a\u83b7\u53d6\u6298\u6263\u65b9\u6cd5 \u5165\u53c2 \u7528\u6237\u7f16\u7801\u3001\u95e8\u5e97\u7f16\u7801\u3001\u91d1\u989d \u8fd4\u56de\u503c\u662f\u5177\u4f53\u6298\u6263 getNewStoreDays \u65b9\u6cd5\u4e3a\u83b7\u53d6\u65b0\u5e97\u5929\u6570\u7684\u516c\u53c2\u914d\u7f6e \u8fd4\u56de\u503c\u662f\u5177\u4f53\u65b0\u5e97\u5929\u6570 getDistanceNowDays \u65b9\u6cd5\u5de5\u5177\u65b9\u6cd5\u4e3a\u83b7\u53d6\u4e00\u4e2a\u65f6\u95f4\u5230\u73b0\u5728\u7684\u5929\u6570 \u5165\u53c2\u4e3a\u65f6\u95f4 \u8fd4\u56de\u503c\u4e3a\u5929\u6570 getStore \u65b9\u6cd5\u4e3a\u6839\u636e\u95e8\u5e97\u7f16\u7801\u83b7\u53d6\u95e8\u5e97\u5b8c\u6574\u4fe1\u606f \u5165\u53c2\u95e8\u5e97\u7f16\u7801 \u8fd4\u56de\u503c \u95e8\u5e97\u5bf9\u8c61 getArea \u65b9\u6cd5\u4e3a\u6839\u636e\u533a\u57df\u7f16\u7801\u83b7\u53d6\u533a\u57df\u5b8c\u6574\u4fe1\u606f \u5165\u53c2\u533a\u57df\u7f16\u7801 \u8fd4\u56de\u503c \u533a\u57df\u5bf9\u8c61 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 /** * \u4e0b\u5355\u76f8\u5173 */ public class CreateOrder { public BigDecimal getDiscount ( String userCode , String storeCode , BigDecimal amount ) { if ( storeCode == null || storeCode == '' ){ return new BigDecimal ( \"1\" ); } Store store = getStore ( storeCode ); if (( store . level == Level . L_10 ) || ( store . area . code == \"JJJ\" )) { return new BigDecimal ( \"0.7\" ); } int day = getNewStoreDays (); if ( getDistanceNowDays ( store . startTime ) < day ) { return new BigDecimal ( \"0.8\" ); } else if ( amount > 10000 ){ return new BigDecimal ( \"0.9\" ); } return new BigDecimal ( \"1\" ); } private int getNewStoreDays () { return 365 ; } private int getDistanceNowDays ( LocalDate history ) { Period period = Period . between ( history , LocalDate . now ()); return period . getDays (); } private Store getStore ( String storeCode ) { Store store = new Store (); store . code = \"1002\" ; store . name = \"XX\u95e8\u5e97\" ; store . level = Level . L_20 ; store . area = getArea ( \"JJJ\" ); return store ; } private Area getArea ( String areaCode ) { Area area = new Area (); area . code = \"JJJ\" ; area . name = \"\u4eac\u6d25\u5180\" ; return area ; } }","title":"\u4e3b\u9875"},{"location":"#_1","text":"","title":"\u4e3b\u9875"},{"location":"#themis","text":"\u4f4e\u4ee3\u7801\u6846\u67b6 Themis \u662f\u4e00\u4e2a\u4f4e\u4ee3\u7801\u6846\u67b6\u8d1f\u8d23\u5c06\u4ee5\u4e0b\u4ee3\u7801\u90e8\u5206\u4ee5\u4f4e\u4ee3\u7801\u7684\u65b9\u5f0f\u5b9e\u73b0","title":"\u4ec0\u4e48\u662fThemis"},{"location":"#_2","text":"\u5728\u4ecb\u7ecdThemis\u4e4b\u524d\u6211\u4eec\u5148\u6765\u770b\u4e00\u6bb5\u5e38\u89c1\u7684\u4e1a\u52a1\u9700\u6c42\u548c\u5982\u4f55\u5b9e\u73b0 \u4f8b\u5982\u5728\u524d\u53f0\u4e0b\u5355\u524d\uff08\u77e5\u9053\u7528\u6237\u3001\u95e8\u5e97\u3001\u91d1\u989d\uff09\u9700\u8981\u83b7\u53d6\u53ef\u4ee5\u4eab\u53d7\u591a\u5c11\u6298\u6263 \u4e1a\u52a1\u89c4\u5219\u662f \u95e8\u5e97\u7b49\u7ea7\u4e3a\u7532\u7ea7 \u6216\u8005 \u95e8\u5e97\u6240\u5c5e\u533a\u57df\u4e3a\u4eac\u6d25\u5180\u533a\u57df \u5219 \u6298\u6263\u4e3a7\u6298 . \u5426\u5219 \u95e8\u5e97\u4e3a\u65b0\u5e97 \u5219 \u6298\u6263\u4e3a8\u6298 ,\u4f46\u662f\u5f00\u4e1a\u591a\u5c11\u5929\u5185\u7684\u95e8\u5e97\u4e3a\u65b0\u5e97\u91c7\u7528\u516c\u53c2\u914d\u7f6e. \u5426\u5219 \u8ba2\u5355\u91d1\u989d\u5927\u4e8e10000 \u6298\u6263\u4e3a9\u6298. \u5747\u4e0d\u6ee1\u8db3\u5219\u4e0d\u4eab\u53d7\u6298\u6263 . \u4e00\u4e2a\u679a\u4e3e\u7c7b:Level\u8868\u793a\u95e8\u5e97\u7b49\u7ea7 \u5206\u522b\u4e3a10\u753220\u4e5930\u4e19 \u4e24\u4e2a\u5b9e\u4f53\u7c7b:Area\u8868\u793a\u533a\u57df\u3001Store\u8868\u793a\u95e8\u5e97,\u5176\u4e2d\u95e8\u5e97\u4e2d\u5b58\u5728\u4e00\u4e2a\u5c5e\u6027\u9879area\u6570\u636e\u7c7b\u578b\u4e3a\u533a\u57df\u5bf9\u8c61 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 /** * \u533a\u57df */ public class Area { //\u7f16\u7801 private String code ; //\u533a\u57df\u540d\u79f0 private String name ; } /** * \u95e8\u5e97\u7b49\u7ea7\u679a\u4e3e */ public enum Level { L_10 ( \"10\" , \"\u7532\" ), L_20 ( \"20\" , \"\u4e59\" ), L_30 ( \"30\" , \"\u4e19\" ); private String code ; private String name ; private Level ( String code , String name ) { this . code = code ; this . name = name ; } } /** * \u95e8\u5e97 */ public class Store { //\u7f16\u7801 private String code ; //\u95e8\u5e97\u540d\u79f0 private String name ; //\u5f00\u4e1a\u65f6\u95f4 private LocalDate startTime ; //\u95e8\u5e97\u7b49\u7ea7 private Level level ; //\u95e8\u5e97\u6240\u5c5e\u533a\u57df private Area area ; } \u4e1a\u52a1\u4ee3\u7801\u5c06\u53ef\u4ee5\u91c7\u7528\u5982\u4e0b\u5b9e\u73b0 getDiscount \u65b9\u6cd5\u4e3a\u83b7\u53d6\u6298\u6263\u65b9\u6cd5 \u5165\u53c2 \u7528\u6237\u7f16\u7801\u3001\u95e8\u5e97\u7f16\u7801\u3001\u91d1\u989d \u8fd4\u56de\u503c\u662f\u5177\u4f53\u6298\u6263 getNewStoreDays \u65b9\u6cd5\u4e3a\u83b7\u53d6\u65b0\u5e97\u5929\u6570\u7684\u516c\u53c2\u914d\u7f6e \u8fd4\u56de\u503c\u662f\u5177\u4f53\u65b0\u5e97\u5929\u6570 getDistanceNowDays \u65b9\u6cd5\u5de5\u5177\u65b9\u6cd5\u4e3a\u83b7\u53d6\u4e00\u4e2a\u65f6\u95f4\u5230\u73b0\u5728\u7684\u5929\u6570 \u5165\u53c2\u4e3a\u65f6\u95f4 \u8fd4\u56de\u503c\u4e3a\u5929\u6570 getStore \u65b9\u6cd5\u4e3a\u6839\u636e\u95e8\u5e97\u7f16\u7801\u83b7\u53d6\u95e8\u5e97\u5b8c\u6574\u4fe1\u606f \u5165\u53c2\u95e8\u5e97\u7f16\u7801 \u8fd4\u56de\u503c \u95e8\u5e97\u5bf9\u8c61 getArea \u65b9\u6cd5\u4e3a\u6839\u636e\u533a\u57df\u7f16\u7801\u83b7\u53d6\u533a\u57df\u5b8c\u6574\u4fe1\u606f \u5165\u53c2\u533a\u57df\u7f16\u7801 \u8fd4\u56de\u503c \u533a\u57df\u5bf9\u8c61 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 /** * \u4e0b\u5355\u76f8\u5173 */ public class CreateOrder { public BigDecimal getDiscount ( String userCode , String storeCode , BigDecimal amount ) { if ( storeCode == null || storeCode == '' ){ return new BigDecimal ( \"1\" ); } Store store = getStore ( storeCode ); if (( store . level == Level . L_10 ) || ( store . area . code == \"JJJ\" )) { return new BigDecimal ( \"0.7\" ); } int day = getNewStoreDays (); if ( getDistanceNowDays ( store . startTime ) < day ) { return new BigDecimal ( \"0.8\" ); } else if ( amount > 10000 ){ return new BigDecimal ( \"0.9\" ); } return new BigDecimal ( \"1\" ); } private int getNewStoreDays () { return 365 ; } private int getDistanceNowDays ( LocalDate history ) { Period period = Period . between ( history , LocalDate . now ()); return period . getDays (); } private Store getStore ( String storeCode ) { Store store = new Store (); store . code = \"1002\" ; store . name = \"XX\u95e8\u5e97\" ; store . level = Level . L_20 ; store . area = getArea ( \"JJJ\" ); return store ; } private Area getArea ( String areaCode ) { Area area = new Area (); area . code = \"JJJ\" ; area . name = \"\u4eac\u6d25\u5180\" ; return area ; } }","title":"\u5f00\u53d1\u4e00\u4e2a\u9700\u6c42"},{"location":"%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/","text":"\u4f7f\u7528\u6587\u6863 \u5feb\u901f\u5f00\u59cb \u914d\u7f6e\u5f15\u5165 <dependency> <groupId> com.goddess </groupId> <artifactId> rule </artifactId> <version> 1.0-SNAPSHOT </version> </dependency> \u6587\u4ef6\u914d\u7f6e spring\u5f15\u5165Rule \u5c06RuleConfig\u7684\u914d\u7f6e\u6587\u4ef6\u52a0\u5165\u7684spirng\u5bb9\u5668 @Configuration public class RuleConfiguration { @Bean public RuleConfig getRuleConfig () { RuleConfig ruleConfig = null ; try { ruleConfig = new XMLRuleConfigBuilder (). build ( \"classpath:workflow/rule-config.xml\" ); } catch ( Exception e ){ e . printStackTrace (); } return ruleConfig ; } } \u975espring\u5f15\u5165Rule \u6587\u4ef6\u914d\u7f6e \u57fa\u7840\u7ec4\u4ef6 Meta\u7ec4\u4ef6\u2500\u2500\u5143\u6570\u636e\u5b9a\u4e49 Meta\u7ec4\u4ef6\u662f\u63d0\u4f9b\u5bf9\u5143\u6570\u636e\u7684\u7ba1\u7406 \u63d0\u793a\uff1a\u53c2\u4e0e\u6267\u884c\u8fc7\u7a0b\u7684\u6570\u636e\u5b9e\u4f53\u5219\u53ef\u4ee5\u62bd\u8c61\u6210Meta\u7ec4\u4ef6\u914d\u7f6e\u7684\u5185\u5bb9 \u5305\u62ec\u4e86MetaClass \u89c4\u5219\u5bf9\u8c61\u7c7b\u3001MetaProperty\u5bf9\u8c61\u5c5e\u6027\u9879\u3001MetaEnum\u5c5e\u6027\u9879\u679a\u4e3e\u503c \u5177\u4f53\u6848\u4f8b\u5982\u4e0b\u53ef\u4ee5\u5c06\u4ee5\u4e0b\u4ee3\u7801\u5229\u7528meta\u7ec4\u4ef6\u7ec4\u4ef6\u7684\u914d\u7f6e\u8fdb\u884c\u8868\u8fbe 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 <metaEnums> <metaEnum code= \"storeLevel\" name= \"\u95e8\u5e97\u7b49\u7ea7\" type= \"FIXED\" > <items> <item code= \"10\" name= \"\u7532\" ></item> <item code= \"20\" name= \"\u4e59\" ></item> <item code= \"30\" name= \"\u4e19\" ></item> </items> </metaEnum> </metaEnums> <metaClasses> <metaClass code= \"area\" name= \"\u533a\u57df\" > <properties> <property code= \"code\" name= \"\u95e8\u5e97\u7f16\u7801\" dataType= \"STRING\" primary= \"true\" /> <property code= \"name\" name= \"\u95e8\u5e97\u540d\u79f0\" dataType= \"STRING\" /> </properties> </metaClass> <metaClass code= \"store\" name= \"\u95e8\u5e97\" > <properties> <property code= \"code\" name= \"\u95e8\u5e97\u7f16\u7801\" dataType= \"STRING\" primary= \"true\" /> <property code= \"name\" name= \"\u95e8\u5e97\u540d\u79f0\" dataType= \"STRING\" /> <property code= \"startTime\" name= \"\u5f00\u4e1a\u65f6\u95f4\" dataType= \"TIME_YMD\" /> <property code= \"level\" name= \"\u95e8\u5e97\u7b49\u7ea7\" dataType= \"STRING\" enumCode= \"storeLevel\" /> <property code= \"area\" name= \"\u95e8\u5e97\u6240\u5c5e\u533a\u57df\" dataType= \"area\" /> </properties> </metaClass> </metaClasses> Action\u7ec4\u4ef6\u2500\u2500\u884c\u4e3a\u5b9a\u4e49 \u8fd9\u662f note \u7c7b\u578b\u7684\u63d0\u793a\u6846 \u63d0\u793a\uff1a\u66f4\u591a\u7cbe\u5f69\u5185\u5bb9\u8bb0\u5f97\u5173\u6ce8\u6211\u554a \u8fd9\u662f success \u7c7b\u578b\u7684\u63d0\u793a\u6846 \u6210\u529f\uff01 \u8fd9\u662f failure \u7c7b\u578b\u7684\u63d0\u793a\u6846 \u5931\u8d25\uff01 \u8fd9\u662f bug \u7c7b\u578b\u7684\u63d0\u793a\u6846 \u53d1\u73b0\u4e00\u4e2a bug\uff0c\u8bf7\u5c3d\u5feb\u4fee\u590d\uff01 Function\u7ec4\u4ef6\u2500\u2500\u6269\u5c55\u65b9\u6cd5 FormulaNode\u7ec4\u4ef6\u2500\u2500\u8868\u8fbe\u5f0f\u914d\u7f6e Bound\u7ec4\u4ef6\u2500\u2500\u52a8\u6001\u5b57\u7b26\u4e32 \u89c4\u5219\u6269\u5c55 Ruleline\u7ec4\u4ef6\u2500\u2500\u89c4\u5219\u884c \u6d41\u7a0b\u7f16\u6392\u7ec4\u4ef6 Graph\u7ec4\u4ef6\u2500\u2500\u51b3\u7b56\u56fe\u914d\u7f6e Flow\u7ec4\u4ef6\u2500\u2500\u6d41\u7a0b\u914d\u7f6e","title":"\u4f7f\u7528\u6587\u6863"},{"location":"%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/#_1","text":"","title":"\u4f7f\u7528\u6587\u6863"},{"location":"%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/#_2","text":"","title":"\u5feb\u901f\u5f00\u59cb"},{"location":"%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/#_3","text":"<dependency> <groupId> com.goddess </groupId> <artifactId> rule </artifactId> <version> 1.0-SNAPSHOT </version> </dependency>","title":"\u914d\u7f6e\u5f15\u5165"},{"location":"%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/#_4","text":"","title":"\u6587\u4ef6\u914d\u7f6e"},{"location":"%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/#springrule","text":"\u5c06RuleConfig\u7684\u914d\u7f6e\u6587\u4ef6\u52a0\u5165\u7684spirng\u5bb9\u5668 @Configuration public class RuleConfiguration { @Bean public RuleConfig getRuleConfig () { RuleConfig ruleConfig = null ; try { ruleConfig = new XMLRuleConfigBuilder (). build ( \"classpath:workflow/rule-config.xml\" ); } catch ( Exception e ){ e . printStackTrace (); } return ruleConfig ; } }","title":"spring\u5f15\u5165Rule"},{"location":"%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/#springrule_1","text":"","title":"\u975espring\u5f15\u5165Rule"},{"location":"%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/#_5","text":"","title":"\u6587\u4ef6\u914d\u7f6e"},{"location":"%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/#_6","text":"","title":"\u57fa\u7840\u7ec4\u4ef6"},{"location":"%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/#meta","text":"Meta\u7ec4\u4ef6\u662f\u63d0\u4f9b\u5bf9\u5143\u6570\u636e\u7684\u7ba1\u7406 \u63d0\u793a\uff1a\u53c2\u4e0e\u6267\u884c\u8fc7\u7a0b\u7684\u6570\u636e\u5b9e\u4f53\u5219\u53ef\u4ee5\u62bd\u8c61\u6210Meta\u7ec4\u4ef6\u914d\u7f6e\u7684\u5185\u5bb9 \u5305\u62ec\u4e86MetaClass \u89c4\u5219\u5bf9\u8c61\u7c7b\u3001MetaProperty\u5bf9\u8c61\u5c5e\u6027\u9879\u3001MetaEnum\u5c5e\u6027\u9879\u679a\u4e3e\u503c \u5177\u4f53\u6848\u4f8b\u5982\u4e0b\u53ef\u4ee5\u5c06\u4ee5\u4e0b\u4ee3\u7801\u5229\u7528meta\u7ec4\u4ef6\u7ec4\u4ef6\u7684\u914d\u7f6e\u8fdb\u884c\u8868\u8fbe 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 <metaEnums> <metaEnum code= \"storeLevel\" name= \"\u95e8\u5e97\u7b49\u7ea7\" type= \"FIXED\" > <items> <item code= \"10\" name= \"\u7532\" ></item> <item code= \"20\" name= \"\u4e59\" ></item> <item code= \"30\" name= \"\u4e19\" ></item> </items> </metaEnum> </metaEnums> <metaClasses> <metaClass code= \"area\" name= \"\u533a\u57df\" > <properties> <property code= \"code\" name= \"\u95e8\u5e97\u7f16\u7801\" dataType= \"STRING\" primary= \"true\" /> <property code= \"name\" name= \"\u95e8\u5e97\u540d\u79f0\" dataType= \"STRING\" /> </properties> </metaClass> <metaClass code= \"store\" name= \"\u95e8\u5e97\" > <properties> <property code= \"code\" name= \"\u95e8\u5e97\u7f16\u7801\" dataType= \"STRING\" primary= \"true\" /> <property code= \"name\" name= \"\u95e8\u5e97\u540d\u79f0\" dataType= \"STRING\" /> <property code= \"startTime\" name= \"\u5f00\u4e1a\u65f6\u95f4\" dataType= \"TIME_YMD\" /> <property code= \"level\" name= \"\u95e8\u5e97\u7b49\u7ea7\" dataType= \"STRING\" enumCode= \"storeLevel\" /> <property code= \"area\" name= \"\u95e8\u5e97\u6240\u5c5e\u533a\u57df\" dataType= \"area\" /> </properties> </metaClass> </metaClasses>","title":"Meta\u7ec4\u4ef6\u2500\u2500\u5143\u6570\u636e\u5b9a\u4e49"},{"location":"%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/#action","text":"\u8fd9\u662f note \u7c7b\u578b\u7684\u63d0\u793a\u6846 \u63d0\u793a\uff1a\u66f4\u591a\u7cbe\u5f69\u5185\u5bb9\u8bb0\u5f97\u5173\u6ce8\u6211\u554a \u8fd9\u662f success \u7c7b\u578b\u7684\u63d0\u793a\u6846 \u6210\u529f\uff01 \u8fd9\u662f failure \u7c7b\u578b\u7684\u63d0\u793a\u6846 \u5931\u8d25\uff01 \u8fd9\u662f bug \u7c7b\u578b\u7684\u63d0\u793a\u6846 \u53d1\u73b0\u4e00\u4e2a bug\uff0c\u8bf7\u5c3d\u5feb\u4fee\u590d\uff01","title":"Action\u7ec4\u4ef6\u2500\u2500\u884c\u4e3a\u5b9a\u4e49"},{"location":"%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/#function","text":"","title":"Function\u7ec4\u4ef6\u2500\u2500\u6269\u5c55\u65b9\u6cd5"},{"location":"%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/#formulanode","text":"","title":"FormulaNode\u7ec4\u4ef6\u2500\u2500\u8868\u8fbe\u5f0f\u914d\u7f6e"},{"location":"%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/#bound","text":"","title":"Bound\u7ec4\u4ef6\u2500\u2500\u52a8\u6001\u5b57\u7b26\u4e32"},{"location":"%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/#_7","text":"","title":"\u89c4\u5219\u6269\u5c55"},{"location":"%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/#ruleline","text":"","title":"Ruleline\u7ec4\u4ef6\u2500\u2500\u89c4\u5219\u884c"},{"location":"%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/#_8","text":"","title":"\u6d41\u7a0b\u7f16\u6392\u7ec4\u4ef6"},{"location":"%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/#graph","text":"","title":"Graph\u7ec4\u4ef6\u2500\u2500\u51b3\u7b56\u56fe\u914d\u7f6e"},{"location":"%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/#flow","text":"","title":"Flow\u7ec4\u4ef6\u2500\u2500\u6d41\u7a0b\u914d\u7f6e"},{"location":"%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF/","text":"\u8bbe\u8ba1\u601d\u8def \u4e3a\u4e86\u5b8c\u6210\u4ee5\u4e0a\u4ee3\u7801\u7684\u4f4e\u4ee3\u7801\u914d\u7f6e\u5316,\u540c\u4efb\u4f55\u4e00\u95e8\u7f16\u7a0b\u8bed\u8a00\u4e00\u6837Themis\u5bf9\u9762\u5411\u5171\u6027\u7684\u5185\u5bb9\u8fdb\u884c\u4e86\u57fa\u7840\u5b9e\u73b0\u4f8b\u5982:\u6570\u636e\u7c7b\u578b\u3001\u64cd\u4f5c\u6570\u3001\u64cd\u4f5c\u7b26\u3001\u8fd0\u7b97\u8868\u8fbe\u5f0f\u3001\u51fd\u6570\u7684\u5b9a\u4e49\u4e0e\u8c03\u7528\u3001\u987a\u5e8f\u3001\u5206\u652f\u3001\u5faa\u73af\u3001\u8d4b\u503c\u64cd\u4f5c \u6570\u636e\u7c7b\u578b Themis\u652f\u6301\u57fa\u7840\u6570\u636e\u7c7b\u578b\u548c\u590d\u5408\u6570\u636e\u7c7b\u578b ,\u81ea\u5b9a\u4e49\u5bf9\u8c61\u53ef\u4ee5\u91c7\u7528Meta\u7ec4\u4ef6\u4e2d\u7684\u80fd\u529b\u6765\u6269\u5c55\u590d\u6742\u7684\u6570\u636e\u7c7b\u578b \u57fa\u7840\u6570\u636e\u7c7b\u578b \u6570\u636e\u7c7b\u578b \u6807\u8bc6 \u6570\u503c NUMBER \u5b57\u7b26\u4e32 STRING \u5e03\u5c14 BOLL \u5e74\u6708\u65e5 TIME_YMD \u65f6\u5206\u79d2 TIME_HMS \u5e74\u6708\u65e5\u65f6\u5206\u79d2 TIME_YMDHMS \u590d\u5408\u6570\u636e\u7c7b\u578b \u590d\u5408\u6570\u636e\u7c7b\u578b\u63d0\u4f9b\u4e86: \u952e\u503c\u5bf9 MAP\u3001 \u5217\u8868 \u5219\u901a\u8fc7complex\u6807\u8bc6 complex=N\u6807\u8bc6\u53d8\u91cf\u4e3aN\u7ef4\u6570\u7ec4 \u64cd\u4f5c\u6570 \u64cd\u4f5c\u6570\u662f\u7a0b\u5e8f\u7684\u6700\u5c0f\u64cd\u4f5c\u5355\u5143, \u6211\u4eec\u7528FormulaNode\u8868\u793a\u4e00\u4e2a\u7684\u64cd\u4f5c\u6570 Themis\u4e2d\u5185\u7f6e\u4e863\u79cd\u57fa\u7840\u64cd\u4f5c\u6570 DataNode \u8868\u793a\u56fa\u5b9a\u503c,\u662f\u6709\u914d\u7f6e\u4eba\u5458\u624b\u52a8\u6307\u5b9a\u7684 PathNode \u8868\u793a\u53d8\u91cf\u503c,\u53ef\u4ee5\u57fa\u4e8ejsonPath\u7684\u5199\u6cd5\u4ece\u51b3\u7b56\u4e0a\u4e0b\u6587\u4e2d\u83b7\u53d6\u6307\u5b9a\u7684\u53d8\u91cf\u503c,\u6807\u8bc6\u4e3a${xxx.yyy} FuncNode \u8868\u793a\u65b9\u6cd5\u578b\u51fd\u6570\u7684\u8c03\u7528,\u6807\u8bc6\u4e3a%{\u65b9\u6cd5\u540d(\u5f62\u53c21:\u64cd\u4f5c\u6570,......)} \u57fa\u4e8e\u5185\u7f6e\u64cd\u4f5c\u6570getDiscount\u4e2d\u7684 getDistanceNowDays ( store . startTime ) \u53ef\u4ee5\u8868\u793a\u4e3a %{getDistanceNowDays(history:${store.startTime})} \u64cd\u4f5c\u7b26 \u5173\u7cfb\u8fd0\u7b97\u7b26 \u64cd\u4f5c\u7b26 \u64cd\u4f5c\u7b26\u6807\u8bc6 \u6570\u503c \u5b57\u7b26\u4e32 \u5e03\u5c14 \u5e74\u6708\u65e5 \u65f6\u5206\u79d2 \u5e74\u6708\u65e5\u65f6\u5206\u79d2 \u7b49\u4e8e eq \u2705 \u2705 \u2705 \u2705 \u2705 \u2705 \u4e0d\u7b49\u4e8e neq \u2705 \u2705 \u2705 \u2705 \u2705 \u2705 \u5927\u4e8e gt \u2705 \u2705 \u2705 \u2705 \u2705 \u2705 \u5c0f\u4e8e\u7b49\u4e8e le \u2705 \u2705 \u2705 \u2705 \u2705 \u2705 \u5c0f\u4e8e lt \u2705 \u2705 \u2705 \u2705 \u2705 \u2705 \u5927\u4e8e\u7b49\u4e8e ge \u2705 \u2705 \u2705 \u2705 \u2705 \u2705 \u7b49\u4e8e(\u4e0d\u533a\u5206\u5927\u5c0f\u5199) eqd \u2705 \u2705 \u2705 \u2705 \u2705 \u2705 \u4e0d\u7b49\u4e8e(\u4e0d\u533a\u5206) neqd \u2705 \u2705 \u2705 \u2705 \u2705 \u2705 \u903b\u8f91\u8fd0\u7b97\u7b26 Themis\u652f\u6301 || \u6216\u3001 && \u4e14 \u51fd\u6570\u7684\u5b9a\u4e49\u4e0e\u8c03\u7528 \u5b9a\u4e49\u4e0e\u8c03\u7528 \u4f8b\u5982getDiscount\u4e2d\u8c03\u7528getStore\u3001getNewStoreDays\u3001getDistanceNowDays\u88ab\u79f0\u4e3a\u51fd\u6570\u8c03\u7528\u3002 getStore\u3001getNewStoreDays\u3001getDistanceNowDays\u7684\u51fd\u6570\u5b9e\u73b0\u903b\u8f91\u79f0\u4e3a\u51fd\u6570\u5b9a\u4e49\u3002\u4e00\u4e2a\u51fd\u6570\u5b9a\u4e49\u540e\u624d\u80fd\u88ab\u8c03\u7528\u3002 \u51fd\u6570\u5b9a\u4e49\u6211\u4eec\u8981\u89e3\u51b3:\u51fd\u6570\u540d\u79f0\u3001\u65b9\u6cd5\u4f53\u3001\u63a5\u53d7\u5165\u53c2\u3001\u5165\u53c2\u9ed8\u8ba4\u503c\u8d4b\u503c\u3001\u5165\u53c2\u6821\u9a8c\u3001\u903b\u8f91\u6267\u884c\u3001\u8fd4\u56de\u503cORM\u6620\u5c04\u7684\u95ee\u9898 \u51fd\u6570\u8c03\u7528\u6211\u4eec\u8981\u89e3\u51b3:\u8c03\u7528\u7684\u4f20\u53c2,\u63a5\u6536\u8fd4\u56de\u503c\u7684\u95ee\u9898 \u4f8b\u5982 getDiscount \u4e2d \u8c03\u7528 getStore \u4f20\u5165 storeCode \u5c5e\u6027\u9879 \u5e76\u4e14\u83b7\u53d6\u8fd4\u56de\u503c\u8d4b\u503c\u7ed9store\u53d8\u91cf\u3002 \u5728Themis\u4e2dgetDiscount\u662f\u4e1a\u52a1\u89c4\u5219\u7684\u5177\u4f53\u5b9e\u73b0,\u5c5e\u4e8e\u89c4\u5219\u7684\u90e8\u5206\u4e0d\u5c5e\u4e8e\u51fd\u6570\u8c03\u7528\u3002 getStore\u3001getNewStoreDays\u4e3a\u884c\u4e3a\u8c03\u7528,getDistanceNowDays\u4e3a\u65b9\u6cd5\u8c03\u7528 \u65b9\u6cd5\u548c\u884c\u4e3a\u7684\u5212\u5206\u4f9d\u636e\u662f\u4ece\u5f00\u53d1\u7684\u89d2\u5ea6\u51fa\u53d1\u7684,\u4f46\u662f\u4e24\u8005\u672c\u8eab\u6ca1\u6709\u591a\u5927\u7684\u5dee\u5f02\u90fd\u662f\u8c03\u7528\u65b9\u6cd5\u4f20\u5165\u53c2\u6570\u83b7\u53d6\u5176\u8fd4\u56de\u503c \u65b9\u6cd5 \u65b9\u6cd5\u662f\u4e00\u4e9b\u7cfb\u7edf\u6574\u4f53\u4e0a\u7684\u5de5\u5177\u51fd\u6570,\u4f8b\u5982:\u52a0\u3001\u51cf\u3001\u4e58\u3001\u9664\u3001\u83b7\u53d6\u65f6\u95f4\u8fd9\u4e00\u7c7b\u7684\u5de5\u5177\u51fd\u6570,\u5b83\u4eec\u666e\u904d\u5177\u6709\u4e00\u4e2a\u7279\u6027\u5c31\u662f\u9010\u4e00\u5b9e\u73b0\u7684\u66f4\u591a\u7684\u662f\u9762\u5411\u5f00\u53d1\u3002 \u884c\u4e3a \u884c\u4e3a\u662f\u6309\u7167\u7edf\u4e00\u7684\u7c7b\u578b\u8fdb\u884c\u5b9e\u73b0\u7684,\u66f4\u591a\u7684\u662f\u9762\u5411\u4e1a\u52a1,\u4f8b\u5982:\u53d1\u9001http\u8bf7\u6c42\u3001\u64cd\u4f5c\u6570\u636e\u5e93\u3002 getStore\u51fd\u6570\u5b9a\u4e49 getStore\u51fd\u6570\u540d\u79f0\u3001\u65b9\u6cd5\u4f53\u3001\u8fd4\u56de\u503cORM\u6620\u5c04\u90e8\u5206\u91c7\u7528Action\u8868\u793a \u51fd\u6570\u540d\u79f0 \u884c\u4e3a\u7c7b\u578b \u8fd4\u53c2\u6570\u636e\u7c7b\u578b \u8fd4\u53c2\u662f\u5426\u5217\u8868 \u8fd4\u56de\u503c\u6620\u5c04 code dataType complex mappings storeCode STORE 0 \u8fd4\u56de\u503c\u6620\u5c04\u91c7\u7528Mapping\u8868\u8fbe,\u9ed8\u8ba4mapping\u91c7\u7528\u533a\u5206\u5927\u5c0f\u5199\u7684\u5c5e\u6027\u540d\u6620\u5c04 \u6e90\u5c5e\u6027\u9879 \u76ee\u6807\u5c5e\u6027\u9879 code result getStore\u5165\u53c2\u90e8\u5206\u6211\u4eec\u62bd\u8c61\u4e3aParam\u5217\u8868\u6765\u8fdb\u884c\u8868\u8fbe\u4e3a \u5165\u53c2\u540d\u79f0 \u5fc5\u4f20 \u53c2\u6570\u6570\u636e\u7c7b\u578b \u662f\u5426\u5217\u8868 \u9ed8\u8ba4\u503c code necessary dataType complex data storeCode true STRING 0 null \u4e0a\u8ff0\u6ca1\u6709\u9ed8\u8ba4\u503c\u5b58\u5728\u9ed8\u8ba4\u503c\u7684\u60c5\u51b5\u53ef\u4ee5\u91c7\u7528 Formula\u8868\u8fbe\u5f0f\u8868\u793a\u9ed8\u8ba4\u503c getDiscount\u8c03\u7528getStore \u6211\u4eec\u62bd\u8c61\u4e3aExecute\u6765\u8fdb\u884c\u8868\u8fbe\u4e3a \u8c03\u7528\u540d\u79f0 \u884c\u4e3a\u540d\u79f0 \u662f\u5426\u63a5\u6536\u8fd4\u56de\u503c \u5165\u53c2\u5217\u8868 code actionCode init injects store getStore true \u5165\u53c2\u6620\u5c04\u91c7\u7528Inject\u8868\u8fbe,${getStore} \u4e3aFormula\u8868\u8fbe\u5f0f \u5f62\u53c2\u540d\u79f0 \u5b9e\u53c2\u6570\u636e code data storeCode ${getStore} \u8865\u5145\u8c03\u7528\u6d41\u7a0b\u56fe\u3002 \u8fd0\u7b97\u8868\u8fbe\u5f0f Themis\u652f\u6301\u5173\u7cfb\u3001\u4f18\u5148\u7ea7\u3001\u903b\u8f91\u8fd0\u7b97 \u8fd0\u7b97\u7684\u6a21\u578b\u6211\u4eec\u53ef\u4ee5\u62bd\u8c61\u4e3a A opention B \u7684\u5f62\u5f0f,opention\u53ef\u4ee5\u53c2\u8003\u64cd\u4f5c\u7b26\u90e8\u5206\u3002\u53c2\u8003\u6570\u5b66\u4e2d \u88ab\u9664\u6570 / \u9664\u6570 \u7684\u5f62\u5f0f\u6211\u4eec\u79f0A\u4e3a\u88ab\u6bd4\u8f83\u7684\u9608\u503c,B\u4e3a\u9608\u503c\u3002 \u8fd0\u7b97\u8fc7\u7a0b\u8fd8\u8981\u652f\u6301()\u4f18\u5148\u7ea7\u8fd0\u7b97\u3002 \u4f8b\u5982 getDiscount \u51fd\u6570\u4e2d \u8868\u8fbe\u5f0f(store.level == Level.L_10) || (store.area.code == \"JJJ\") \u6211\u4eec\u91c7\u7528Expression\u6765\u8fdb\u884c\u8868\u8fbe \u8fd0\u7b97\u7c7b\u578b \u5fc5\u4f20 \u6570\u636e\u7c7b\u578b \u88ab\u6bd4\u8f83\u7684\u9600\u503c \u9600\u503c \u5b50\u8fd0\u7b97 expressionType operationCode dataType cover threshold subExpression \u5728expressionType\u4e3a\u5173\u7cfb\u7c7b\u7684\u65f6\u5019operationCode\u5fc5\u987b\u4e3a\u5173\u7cfb\u8fd0\u7b97\u7b26 \u88ab\u6bd4\u8f83\u7684\u9600\u503c\u53ef\u4ee5\u91c7\u7528 Formula\u8868\u8fbe\u5f0f\u8868\u793a\u9ed8\u8ba4\u503c \u5728expressionType\u4e3a\u903b\u8f91\u7c7b\u7684\u65f6\u5019operationCode\u5fc5\u987b\u4e3a\u903b\u8f91\u8fd0\u7b97\u7b26 \u8868\u793asubExpression\u5217\u8868\u5143\u7d20\u4e4b\u95f4\u7684\u903b\u8f91\u5173\u7cfb \u987a\u5e8f\u3001\u5206\u652f\u3001\u5faa\u73af Themis\u9ed8\u8ba4\u6709Graph\u548cFlow\u4e24\u79cd\u6a21\u5f0f\u4e0d\u540c\u7a0b\u5ea6\u4e0a\u652f\u6301\u4e86\u4e09\u5927\u7ed3\u6784 Flow\u6a21\u5f0f \u5728Flow\u6a21\u5f0f\u76ee\u524d\u4ec5\u652f\u6301\u987a\u5e8f\u7ed3\u6784 Graph\u6a21\u5f0f \u5728Graph\u6a21\u5f0f\u9762\u5bf9\u7a0b\u5e8f\u7684\u4e09\u5927\u7ed3\u6784\u6211\u4eec\u5bf9\u5176\u6709\u62bd\u8c61\u4e3a\u4e00\u4e2a\u6709\u5411\u56fe\u3002 Graph\u6765\u5bf9\u56fe\u4e2d\u7684\u8282\u70b9\u548c\u6d41\u7a0b\u8fdb\u884c\u63cf\u8ff0 \u7f16\u7801 \u540d\u79f0 \u7b2c\u4e00\u8df3 \u5206\u652f\u5217\u8868 \u7ed3\u679c\u5217\u8868 code name firstBranchCode branches results \u5728\u56fe\u4e2d\u6211\u4eec\u6709\u4e09\u5927\u6838\u5fc3\u5143\u7d20 \u5206\u652fBranch\u3001\u94fe\u63a5Link\u3001\u7ed3\u679cResult; \u6bcf\u4e2a\u89c4\u5219\u90fd\u81f3\u5c11\u6709\u4e00\u4e2a\u5206\u652f,\u4f5c\u4e3a\u56fe\u7684\u5165\u53e3[ \u7b2c\u4e00\u8df3 ] \u94fe\u63a5\u5c5e\u4e8e\u5206\u652f\u7684\u5b50\u5c5e\u6027\u7528\u4e8e\u94fe\u63a5\u5206\u652f\u4e0e\u5206\u652f\u6216\u8005\u5206\u652f\u4e0e\u7ed3\u679c,\u94fe\u63a5\u8d77\u5230\u5411\u540e\u8df3\u8f6c\u7684\u4f5c\u7528 \u7ed3\u679c\u8868\u793a\u6d41\u7a0b\u56fe\u7684\u7ec8\u7ed3\u7b26,\u4f5c\u4e3a\u56fe\u7684\u51fa\u53e3 Branch\u662f\u5206\u652f\u7ed3\u6784\u7684\u63cf\u8ff0 \u7f16\u7801 \u540d\u79f0 \u6267\u884c\u5217\u8868 \u94fe\u63a5\u5217\u8868 code name executes links","title":"\u8bbe\u8ba1\u601d\u8def"},{"location":"%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF/#_1","text":"\u4e3a\u4e86\u5b8c\u6210\u4ee5\u4e0a\u4ee3\u7801\u7684\u4f4e\u4ee3\u7801\u914d\u7f6e\u5316,\u540c\u4efb\u4f55\u4e00\u95e8\u7f16\u7a0b\u8bed\u8a00\u4e00\u6837Themis\u5bf9\u9762\u5411\u5171\u6027\u7684\u5185\u5bb9\u8fdb\u884c\u4e86\u57fa\u7840\u5b9e\u73b0\u4f8b\u5982:\u6570\u636e\u7c7b\u578b\u3001\u64cd\u4f5c\u6570\u3001\u64cd\u4f5c\u7b26\u3001\u8fd0\u7b97\u8868\u8fbe\u5f0f\u3001\u51fd\u6570\u7684\u5b9a\u4e49\u4e0e\u8c03\u7528\u3001\u987a\u5e8f\u3001\u5206\u652f\u3001\u5faa\u73af\u3001\u8d4b\u503c\u64cd\u4f5c","title":"\u8bbe\u8ba1\u601d\u8def"},{"location":"%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF/#_2","text":"Themis\u652f\u6301\u57fa\u7840\u6570\u636e\u7c7b\u578b\u548c\u590d\u5408\u6570\u636e\u7c7b\u578b ,\u81ea\u5b9a\u4e49\u5bf9\u8c61\u53ef\u4ee5\u91c7\u7528Meta\u7ec4\u4ef6\u4e2d\u7684\u80fd\u529b\u6765\u6269\u5c55\u590d\u6742\u7684\u6570\u636e\u7c7b\u578b","title":"\u6570\u636e\u7c7b\u578b"},{"location":"%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF/#_3","text":"\u6570\u636e\u7c7b\u578b \u6807\u8bc6 \u6570\u503c NUMBER \u5b57\u7b26\u4e32 STRING \u5e03\u5c14 BOLL \u5e74\u6708\u65e5 TIME_YMD \u65f6\u5206\u79d2 TIME_HMS \u5e74\u6708\u65e5\u65f6\u5206\u79d2 TIME_YMDHMS","title":"\u57fa\u7840\u6570\u636e\u7c7b\u578b"},{"location":"%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF/#_4","text":"\u590d\u5408\u6570\u636e\u7c7b\u578b\u63d0\u4f9b\u4e86: \u952e\u503c\u5bf9 MAP\u3001 \u5217\u8868 \u5219\u901a\u8fc7complex\u6807\u8bc6 complex=N\u6807\u8bc6\u53d8\u91cf\u4e3aN\u7ef4\u6570\u7ec4","title":"\u590d\u5408\u6570\u636e\u7c7b\u578b"},{"location":"%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF/#_5","text":"\u64cd\u4f5c\u6570\u662f\u7a0b\u5e8f\u7684\u6700\u5c0f\u64cd\u4f5c\u5355\u5143, \u6211\u4eec\u7528FormulaNode\u8868\u793a\u4e00\u4e2a\u7684\u64cd\u4f5c\u6570 Themis\u4e2d\u5185\u7f6e\u4e863\u79cd\u57fa\u7840\u64cd\u4f5c\u6570 DataNode \u8868\u793a\u56fa\u5b9a\u503c,\u662f\u6709\u914d\u7f6e\u4eba\u5458\u624b\u52a8\u6307\u5b9a\u7684 PathNode \u8868\u793a\u53d8\u91cf\u503c,\u53ef\u4ee5\u57fa\u4e8ejsonPath\u7684\u5199\u6cd5\u4ece\u51b3\u7b56\u4e0a\u4e0b\u6587\u4e2d\u83b7\u53d6\u6307\u5b9a\u7684\u53d8\u91cf\u503c,\u6807\u8bc6\u4e3a${xxx.yyy} FuncNode \u8868\u793a\u65b9\u6cd5\u578b\u51fd\u6570\u7684\u8c03\u7528,\u6807\u8bc6\u4e3a%{\u65b9\u6cd5\u540d(\u5f62\u53c21:\u64cd\u4f5c\u6570,......)} \u57fa\u4e8e\u5185\u7f6e\u64cd\u4f5c\u6570getDiscount\u4e2d\u7684 getDistanceNowDays ( store . startTime ) \u53ef\u4ee5\u8868\u793a\u4e3a %{getDistanceNowDays(history:${store.startTime})}","title":"\u64cd\u4f5c\u6570"},{"location":"%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF/#_6","text":"","title":"\u64cd\u4f5c\u7b26"},{"location":"%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF/#_7","text":"\u64cd\u4f5c\u7b26 \u64cd\u4f5c\u7b26\u6807\u8bc6 \u6570\u503c \u5b57\u7b26\u4e32 \u5e03\u5c14 \u5e74\u6708\u65e5 \u65f6\u5206\u79d2 \u5e74\u6708\u65e5\u65f6\u5206\u79d2 \u7b49\u4e8e eq \u2705 \u2705 \u2705 \u2705 \u2705 \u2705 \u4e0d\u7b49\u4e8e neq \u2705 \u2705 \u2705 \u2705 \u2705 \u2705 \u5927\u4e8e gt \u2705 \u2705 \u2705 \u2705 \u2705 \u2705 \u5c0f\u4e8e\u7b49\u4e8e le \u2705 \u2705 \u2705 \u2705 \u2705 \u2705 \u5c0f\u4e8e lt \u2705 \u2705 \u2705 \u2705 \u2705 \u2705 \u5927\u4e8e\u7b49\u4e8e ge \u2705 \u2705 \u2705 \u2705 \u2705 \u2705 \u7b49\u4e8e(\u4e0d\u533a\u5206\u5927\u5c0f\u5199) eqd \u2705 \u2705 \u2705 \u2705 \u2705 \u2705 \u4e0d\u7b49\u4e8e(\u4e0d\u533a\u5206) neqd \u2705 \u2705 \u2705 \u2705 \u2705 \u2705","title":"\u5173\u7cfb\u8fd0\u7b97\u7b26"},{"location":"%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF/#_8","text":"Themis\u652f\u6301 || \u6216\u3001 && \u4e14","title":"\u903b\u8f91\u8fd0\u7b97\u7b26"},{"location":"%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF/#_9","text":"\u5b9a\u4e49\u4e0e\u8c03\u7528 \u4f8b\u5982getDiscount\u4e2d\u8c03\u7528getStore\u3001getNewStoreDays\u3001getDistanceNowDays\u88ab\u79f0\u4e3a\u51fd\u6570\u8c03\u7528\u3002 getStore\u3001getNewStoreDays\u3001getDistanceNowDays\u7684\u51fd\u6570\u5b9e\u73b0\u903b\u8f91\u79f0\u4e3a\u51fd\u6570\u5b9a\u4e49\u3002\u4e00\u4e2a\u51fd\u6570\u5b9a\u4e49\u540e\u624d\u80fd\u88ab\u8c03\u7528\u3002 \u51fd\u6570\u5b9a\u4e49\u6211\u4eec\u8981\u89e3\u51b3:\u51fd\u6570\u540d\u79f0\u3001\u65b9\u6cd5\u4f53\u3001\u63a5\u53d7\u5165\u53c2\u3001\u5165\u53c2\u9ed8\u8ba4\u503c\u8d4b\u503c\u3001\u5165\u53c2\u6821\u9a8c\u3001\u903b\u8f91\u6267\u884c\u3001\u8fd4\u56de\u503cORM\u6620\u5c04\u7684\u95ee\u9898 \u51fd\u6570\u8c03\u7528\u6211\u4eec\u8981\u89e3\u51b3:\u8c03\u7528\u7684\u4f20\u53c2,\u63a5\u6536\u8fd4\u56de\u503c\u7684\u95ee\u9898 \u4f8b\u5982 getDiscount \u4e2d \u8c03\u7528 getStore \u4f20\u5165 storeCode \u5c5e\u6027\u9879 \u5e76\u4e14\u83b7\u53d6\u8fd4\u56de\u503c\u8d4b\u503c\u7ed9store\u53d8\u91cf\u3002 \u5728Themis\u4e2dgetDiscount\u662f\u4e1a\u52a1\u89c4\u5219\u7684\u5177\u4f53\u5b9e\u73b0,\u5c5e\u4e8e\u89c4\u5219\u7684\u90e8\u5206\u4e0d\u5c5e\u4e8e\u51fd\u6570\u8c03\u7528\u3002 getStore\u3001getNewStoreDays\u4e3a\u884c\u4e3a\u8c03\u7528,getDistanceNowDays\u4e3a\u65b9\u6cd5\u8c03\u7528 \u65b9\u6cd5\u548c\u884c\u4e3a\u7684\u5212\u5206\u4f9d\u636e\u662f\u4ece\u5f00\u53d1\u7684\u89d2\u5ea6\u51fa\u53d1\u7684,\u4f46\u662f\u4e24\u8005\u672c\u8eab\u6ca1\u6709\u591a\u5927\u7684\u5dee\u5f02\u90fd\u662f\u8c03\u7528\u65b9\u6cd5\u4f20\u5165\u53c2\u6570\u83b7\u53d6\u5176\u8fd4\u56de\u503c \u65b9\u6cd5 \u65b9\u6cd5\u662f\u4e00\u4e9b\u7cfb\u7edf\u6574\u4f53\u4e0a\u7684\u5de5\u5177\u51fd\u6570,\u4f8b\u5982:\u52a0\u3001\u51cf\u3001\u4e58\u3001\u9664\u3001\u83b7\u53d6\u65f6\u95f4\u8fd9\u4e00\u7c7b\u7684\u5de5\u5177\u51fd\u6570,\u5b83\u4eec\u666e\u904d\u5177\u6709\u4e00\u4e2a\u7279\u6027\u5c31\u662f\u9010\u4e00\u5b9e\u73b0\u7684\u66f4\u591a\u7684\u662f\u9762\u5411\u5f00\u53d1\u3002 \u884c\u4e3a \u884c\u4e3a\u662f\u6309\u7167\u7edf\u4e00\u7684\u7c7b\u578b\u8fdb\u884c\u5b9e\u73b0\u7684,\u66f4\u591a\u7684\u662f\u9762\u5411\u4e1a\u52a1,\u4f8b\u5982:\u53d1\u9001http\u8bf7\u6c42\u3001\u64cd\u4f5c\u6570\u636e\u5e93\u3002","title":"\u51fd\u6570\u7684\u5b9a\u4e49\u4e0e\u8c03\u7528"},{"location":"%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF/#getstore","text":"getStore\u51fd\u6570\u540d\u79f0\u3001\u65b9\u6cd5\u4f53\u3001\u8fd4\u56de\u503cORM\u6620\u5c04\u90e8\u5206\u91c7\u7528Action\u8868\u793a \u51fd\u6570\u540d\u79f0 \u884c\u4e3a\u7c7b\u578b \u8fd4\u53c2\u6570\u636e\u7c7b\u578b \u8fd4\u53c2\u662f\u5426\u5217\u8868 \u8fd4\u56de\u503c\u6620\u5c04 code dataType complex mappings storeCode STORE 0 \u8fd4\u56de\u503c\u6620\u5c04\u91c7\u7528Mapping\u8868\u8fbe,\u9ed8\u8ba4mapping\u91c7\u7528\u533a\u5206\u5927\u5c0f\u5199\u7684\u5c5e\u6027\u540d\u6620\u5c04 \u6e90\u5c5e\u6027\u9879 \u76ee\u6807\u5c5e\u6027\u9879 code result getStore\u5165\u53c2\u90e8\u5206\u6211\u4eec\u62bd\u8c61\u4e3aParam\u5217\u8868\u6765\u8fdb\u884c\u8868\u8fbe\u4e3a \u5165\u53c2\u540d\u79f0 \u5fc5\u4f20 \u53c2\u6570\u6570\u636e\u7c7b\u578b \u662f\u5426\u5217\u8868 \u9ed8\u8ba4\u503c code necessary dataType complex data storeCode true STRING 0 null \u4e0a\u8ff0\u6ca1\u6709\u9ed8\u8ba4\u503c\u5b58\u5728\u9ed8\u8ba4\u503c\u7684\u60c5\u51b5\u53ef\u4ee5\u91c7\u7528 Formula\u8868\u8fbe\u5f0f\u8868\u793a\u9ed8\u8ba4\u503c","title":"getStore\u51fd\u6570\u5b9a\u4e49"},{"location":"%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF/#getdiscountgetstore","text":"\u6211\u4eec\u62bd\u8c61\u4e3aExecute\u6765\u8fdb\u884c\u8868\u8fbe\u4e3a \u8c03\u7528\u540d\u79f0 \u884c\u4e3a\u540d\u79f0 \u662f\u5426\u63a5\u6536\u8fd4\u56de\u503c \u5165\u53c2\u5217\u8868 code actionCode init injects store getStore true \u5165\u53c2\u6620\u5c04\u91c7\u7528Inject\u8868\u8fbe,${getStore} \u4e3aFormula\u8868\u8fbe\u5f0f \u5f62\u53c2\u540d\u79f0 \u5b9e\u53c2\u6570\u636e code data storeCode ${getStore} \u8865\u5145\u8c03\u7528\u6d41\u7a0b\u56fe\u3002","title":"getDiscount\u8c03\u7528getStore"},{"location":"%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF/#_10","text":"Themis\u652f\u6301\u5173\u7cfb\u3001\u4f18\u5148\u7ea7\u3001\u903b\u8f91\u8fd0\u7b97 \u8fd0\u7b97\u7684\u6a21\u578b\u6211\u4eec\u53ef\u4ee5\u62bd\u8c61\u4e3a A opention B \u7684\u5f62\u5f0f,opention\u53ef\u4ee5\u53c2\u8003\u64cd\u4f5c\u7b26\u90e8\u5206\u3002\u53c2\u8003\u6570\u5b66\u4e2d \u88ab\u9664\u6570 / \u9664\u6570 \u7684\u5f62\u5f0f\u6211\u4eec\u79f0A\u4e3a\u88ab\u6bd4\u8f83\u7684\u9608\u503c,B\u4e3a\u9608\u503c\u3002 \u8fd0\u7b97\u8fc7\u7a0b\u8fd8\u8981\u652f\u6301()\u4f18\u5148\u7ea7\u8fd0\u7b97\u3002 \u4f8b\u5982 getDiscount \u51fd\u6570\u4e2d \u8868\u8fbe\u5f0f(store.level == Level.L_10) || (store.area.code == \"JJJ\") \u6211\u4eec\u91c7\u7528Expression\u6765\u8fdb\u884c\u8868\u8fbe \u8fd0\u7b97\u7c7b\u578b \u5fc5\u4f20 \u6570\u636e\u7c7b\u578b \u88ab\u6bd4\u8f83\u7684\u9600\u503c \u9600\u503c \u5b50\u8fd0\u7b97 expressionType operationCode dataType cover threshold subExpression \u5728expressionType\u4e3a\u5173\u7cfb\u7c7b\u7684\u65f6\u5019operationCode\u5fc5\u987b\u4e3a\u5173\u7cfb\u8fd0\u7b97\u7b26 \u88ab\u6bd4\u8f83\u7684\u9600\u503c\u53ef\u4ee5\u91c7\u7528 Formula\u8868\u8fbe\u5f0f\u8868\u793a\u9ed8\u8ba4\u503c \u5728expressionType\u4e3a\u903b\u8f91\u7c7b\u7684\u65f6\u5019operationCode\u5fc5\u987b\u4e3a\u903b\u8f91\u8fd0\u7b97\u7b26 \u8868\u793asubExpression\u5217\u8868\u5143\u7d20\u4e4b\u95f4\u7684\u903b\u8f91\u5173\u7cfb","title":"\u8fd0\u7b97\u8868\u8fbe\u5f0f"},{"location":"%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF/#_11","text":"Themis\u9ed8\u8ba4\u6709Graph\u548cFlow\u4e24\u79cd\u6a21\u5f0f\u4e0d\u540c\u7a0b\u5ea6\u4e0a\u652f\u6301\u4e86\u4e09\u5927\u7ed3\u6784","title":"\u987a\u5e8f\u3001\u5206\u652f\u3001\u5faa\u73af"},{"location":"%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF/#flow","text":"\u5728Flow\u6a21\u5f0f\u76ee\u524d\u4ec5\u652f\u6301\u987a\u5e8f\u7ed3\u6784","title":"Flow\u6a21\u5f0f"},{"location":"%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF/#graph","text":"\u5728Graph\u6a21\u5f0f\u9762\u5bf9\u7a0b\u5e8f\u7684\u4e09\u5927\u7ed3\u6784\u6211\u4eec\u5bf9\u5176\u6709\u62bd\u8c61\u4e3a\u4e00\u4e2a\u6709\u5411\u56fe\u3002 Graph\u6765\u5bf9\u56fe\u4e2d\u7684\u8282\u70b9\u548c\u6d41\u7a0b\u8fdb\u884c\u63cf\u8ff0 \u7f16\u7801 \u540d\u79f0 \u7b2c\u4e00\u8df3 \u5206\u652f\u5217\u8868 \u7ed3\u679c\u5217\u8868 code name firstBranchCode branches results \u5728\u56fe\u4e2d\u6211\u4eec\u6709\u4e09\u5927\u6838\u5fc3\u5143\u7d20 \u5206\u652fBranch\u3001\u94fe\u63a5Link\u3001\u7ed3\u679cResult; \u6bcf\u4e2a\u89c4\u5219\u90fd\u81f3\u5c11\u6709\u4e00\u4e2a\u5206\u652f,\u4f5c\u4e3a\u56fe\u7684\u5165\u53e3[ \u7b2c\u4e00\u8df3 ] \u94fe\u63a5\u5c5e\u4e8e\u5206\u652f\u7684\u5b50\u5c5e\u6027\u7528\u4e8e\u94fe\u63a5\u5206\u652f\u4e0e\u5206\u652f\u6216\u8005\u5206\u652f\u4e0e\u7ed3\u679c,\u94fe\u63a5\u8d77\u5230\u5411\u540e\u8df3\u8f6c\u7684\u4f5c\u7528 \u7ed3\u679c\u8868\u793a\u6d41\u7a0b\u56fe\u7684\u7ec8\u7ed3\u7b26,\u4f5c\u4e3a\u56fe\u7684\u51fa\u53e3 Branch\u662f\u5206\u652f\u7ed3\u6784\u7684\u63cf\u8ff0 \u7f16\u7801 \u540d\u79f0 \u6267\u884c\u5217\u8868 \u94fe\u63a5\u5217\u8868 code name executes links","title":"Graph\u6a21\u5f0f"}]}